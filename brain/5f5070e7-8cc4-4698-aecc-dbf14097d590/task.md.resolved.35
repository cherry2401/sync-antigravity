# BDS Website Development Tasks

- [x] Phân tích source code hiện tại
- [x] Triển khai Lưu trữ dữ liệu (LocalStorage)
    - [x] Cập nhật `index.tsx` để đọc/ghi listings từ localStorage
    - [x] Cập nhật `index.tsx` để đọc/ghi news từ localStorage
- [x] Triển khai Bộ lọc tìm kiếm
    - [x] Thêm UI Dropdown cho Mức giá, Diện tích, Khu vực
    - [x] Viết logic lọc dữ liệu (`filteredListings`)
- [ ] Triển khai tính năng Yêu thích (Favorites)
    - [x] Thêm state lưu danh sách ID yêu thích
- [x] Phân tích source code hiện tại
- [x] Triển khai Lưu trữ dữ liệu (LocalStorage)
    - [x] Cập nhật `index.tsx` để đọc/ghi listings từ localStorage
    - [x] Cập nhật `index.tsx` để đọc/ghi news từ localStorage
- [x] Triển khai Bộ lọc tìm kiếm
    - [x] Thêm UI Dropdown cho Mức giá, Diện tích, Khu vực
    - [x] Viết logic lọc dữ liệu (`filteredListings`)
- [x] Triển khai tính năng Yêu thích (Favorites)
    - [x] Thêm state lưu danh sách ID yêu thích
    - [x] Cập nhật UI trái tim để toggle yêu thích
    - [x] Tạo trang xem tin đã lưu
- [x] Sửa lỗi IDE / Linting
    - [x] Chạy npm install

- [x] Giai đoạn 2: Tái cấu trúc (Refactoring) [x]
    - [x] Cài đặt `react-router-dom`
    - [x] Tạo cấu trúc thư mục (`components`, `pages`, `types`, `data`)
    - [x] Tách `types` và `mock data`
    - [x] Tách các Component nhỏ (`Header`, `Footer`, `PropertyCard`, etc.)
    - [x] Tách các Pages (`Home`, [Admin](file:///i:/Website/BDS/src/components/admin/AdminListings.tsx#13-156), `Post`, `Saved`, etc.)
    - [x] Thiết lập Routing trong `App.tsx`
    - [x] Integrate `react-quill-new` and fix layout issues
- [x] Optimize Admin Dashboard for Mobile
    - [x] Make Sidebar responsive (Drawer mode)
    - [x] Add Hamburger Menu for Sidebar toggle
    - [x] Fix table overflow on mobile
    - [x] Adjust padding and margins for small screens
- [ ] Giai đoạn 3: Kết nối Backend (Supabase)
    - [x] Cài đặt `@supabase/supabase-js`
    - [x] Cấu hình Client ([src/lib/supabase.ts](file:///i:/Website/BDS/src/lib/supabase.ts))
    - [x] Tạo bảng dữ liệu (SQL Schema)
    - [x] Kết nối dữ liệu Tin tức (News)
    - [x] Tích hợp Đăng nhập/Đăng xuất (Auth)
        - [x] Tạo AuthContext
        - [x] Tạo trang Login
        - [x] Bảo vệ Admin Routes
    - [x] Bảo vệ Admin Routes
    - [/] Kết nối dữ liệu Tin đăng (Listings)
        - [ ] Update Schema (add missing fields)
        - [ ] Integrate AdminListings (Fetch/Approve/Reject/Delete)
    - [x] Kết nối dữ liệu Người dùng (Users)
    - [x] Kết nối dữ liệu Người dùng (Users)
    - [/] Đăng ký tài khoản (Sign Up)
    - [/] Đăng ký tài khoản (Sign Up)
    - [x] Đăng nhập bằng Google (Social Auth)
- [ ] Giai đoạn 4: Cải tiến giao diện & Tính năng [/]
    - [x] Trang chi tiết BĐS (Slider, Map)
    - [x] Bản đồ tìm kiếm
    - [x] Mobile UX
    - [x] Căn chỉnh Layout (Max-width 1200px)

## Phase 3: Admin Dashboard Overhaul
- [x] Create AdminLayout component (Sidebar/Header) <!-- id: 6 -->
- [x] Create AdminOverview component with Stats and Charts <!-- id: 7 -->
- [x] Create AdminListings component (Table view, Filtering, Approval) <!-- id: 8 -->
- [x] Create AdminUsers component (User management) <!-- id: 9 -->
- [x] Refactor `AdminNews` to save/delete data to Supabase
### 6. Connect Listings to Supabase [NEW]
- **Schema Update**: Propose SQL to add missing fields (`bedrooms`, `bathrooms`, `direction`, etc.) to `bds_listings`.
- **Backend Integration ([src/components/admin/AdminListings.tsx](file:///i:/Website/BDS/src/components/admin/AdminListings.tsx))**:
    - Fetch data from `bds_listings` joined with `bds_users` (for contact info).
    - Map database fields to [Listing](file:///i:/Website/BDS/src/types/index.ts#12-49) interface.
    - Implement `onApprove` (set `status = 'active'`).
    - Implement `onReject` (set `status = 'rejected'`).
    - Implement `onDelete`.
- **Row Level Security**: Ensure policies allow Admin to update any listing.
- [x] Refactor AdminDashboard.tsx to route to new modules <!-- id: 10 -->
