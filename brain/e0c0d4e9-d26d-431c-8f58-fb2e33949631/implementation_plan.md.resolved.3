# Claude Manager App - Technical Specification

## 1. Executive Summary
X√¢y d·ª±ng ·ª©ng d·ª•ng Desktop (Electron) ƒë·ªÉ qu·∫£n l√Ω `claude-ws` server. ·ª®ng d·ª•ng ƒë√≥ng vai tr√≤ "Control Panel", thay th·∫ø vi·ªác s·ª≠ d·ª•ng d√≤ng l·ªánh (CLI) th·ªß c√¥ng.

**M·ª•c ti√™u:**
- Giao di·ªán tr·ª±c quan (GUI) thay v√¨ c·ª≠a s·ªï ƒëen (CMD).
- Qu·∫£n l√Ω tr·∫°ng th√°i (Start/Stop/Logs) th·ªùi gian th·ª±c.
- T·ª± ƒë·ªông h√≥a c√°c t√°c v·ª• b·∫£o tr√¨ (Fix lock, Clear cache).

## 2. Architecture: "The Sidecar Pattern"
·ª®ng d·ª•ng Manager ch·∫°y ƒë·ªôc l·∫≠p v·ªõi `claude-ws` server. N√≥ "monitor" (gi√°m s√°t) v√† "control" (ƒëi·ªÅu khi·ªÉn) server th√¥ng qua PID v√† c√°c l·ªánh h·ªá th·ªëng.

- **Frontend:** React 18, TypeScript, TailwindCSS, Shadcn UI.
- **Backend (Main Process):** Electron (Node.js) ƒë·ªÉ truy c·∫≠p h·ªá th·ªëng file v√† process.
- **IPC Bridge:** Giao ti·∫øp an to√†n gi·ªØa UI v√† System logic.

## 3. Core Features & Logic

### 3.1. Dashboard (Home)
- **Status Monitor:**
  - Ki·ªÉm tra c·ªïng 8556 (HTTP Check).
  - Ki·ªÉm tra PID c·ªßa process Node.js.
  - Hi·ªÉn th·ªã: üü¢ Running | üî¥ Stopped | üü° Starting.
- **Actions:**
  - **Start:** Ch·∫°y l·ªánh `npm run start` (ho·∫∑c file bat) d∆∞·ªõi d·∫°ng child process (detached).
  - **Stop:** G·ª≠i t√≠n hi·ªáu SIGTERM/SIGKILL t·ªõi PID.
  - **Restart:** Stop -> Wait -> Start.

### 3.2. Logs Viewer
- **C∆° ch·∫ø:** ƒê·ªçc real-time `stdout` v√† `stderr` t·ª´ process con.
- **UI:** C·ª≠a s·ªï ph·ª• (Collapsible) ·ªü d∆∞·ªõi ƒë√°y ho·∫∑c Modal.
- **T√≠nh nƒÉng:** Auto-scroll, n√∫t Copy, n√∫t Clear.

### 3.3. Configuration Editor
- ƒê·ªçc file [.env](file:///I:/AIHub/claude-ws/.env) v√† [pm2.config.js](file:///i:/AIHub/claude-ws/pm2.config.js) -> Parse th√†nh Form.
- Cho ph√©p s·ª≠a:
  - Model (Dropdown ch·ªçn list chu·∫©n).
  - Port (Input number).
  - API Key (Password input).
- L∆∞u: Ghi ƒë√® l·∫°i file config.

### 3.4. Troubleshoot (H·ªôp c·ª©u th∆∞∆°ng)
- **Fix Lock:** Th·ª±c hi·ªán logic c·ªßa [fix_lock.bat](file:///I:/AIHub/claude-ws/fix_lock.bat) (Kill node, del .next folder).
- **Auto-Startup:** Toggle ƒë·ªÉ th√™m/x√≥a Shortcut trong folder Startup c·ªßa Windows.

## 4. Tr·∫£ l·ªùi c√¢u h·ªèi Auto-start
- **C∆° ch·∫ø:** Vi·ªác kh·ªüi ƒë·ªông c√πng Windows (qua th∆∞ m·ª•c Startup) ho·∫°t ƒë·ªông ƒê·ªòC L·∫¨P.
- **T∆∞∆°ng t√°c:**
  - Khi m√°y b·∫≠t -> Windows t·ª± ch·∫°y Server ng·∫ßm.
  - Khi b·∫≠t Manager App -> App ki·ªÉm tra th·∫•y c·ªïng 8556 ƒëang c√≥ ng∆∞·ªùi d√πng -> Hi·ªÉn th·ªã tr·∫°ng th√°i **Online**.
  - Ng∆∞·ªùi d√πng b·∫•m Stop tr√™n App -> App gi·∫øt process ng·∫ßm ƒë√≥ -> Server t·∫Øt.
  -> **K·∫øt lu·∫≠n:** Ho√†n to√†n t∆∞∆°ng th√≠ch. App ch·ªâ l√† c√°i "Remote TV", Server l√† c√°i "TV".

## 5. Directory Structure (`I:\AIHub\claude-manager`)
```
/src
  /main        # Electron Main Process (System logic)
  /preload     # IPC Bridge
  /renderer    # React UI
    /components
    /hooks     # useServerStatus, useLogs
    /lib       # utils
```

## 6. Tech Stack
- Electron + Vite (Build tool nhanh nh·∫•t).
- React + TypeScript.
- `ps-list` / `tree-kill`: Qu·∫£n l√Ω process.
- `fs-extra`: Qu·∫£n l√Ω file.
